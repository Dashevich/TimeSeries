# TimeSeries
# TimeSeries
## Класс TimeSeriesAnalysis

Выполняет диагностику свойств временного ряда для лучшей настройки моделей и их анализа.

Методы анализа:

### Тренд:
Линейная регрессия с оценкой значимости (_analyze_trend).
Пример: p_value < 0.05 указывает на наличие дрифта.

### Сезонность:
Декомпозиция STL с оценкой амплитуды (_analyze_seasonality).
Обнаруживает недельные/годовые паттерны через спектральный анализ Фурье (_plot_fourier_spectrum).

### Стационарность:
Тесты ADF и KPSS (_analyze_stationarity).
Используется для автоматического выбора дифференцирования в моделях семейства ARIMA.

### Шумы и выбросы - предобработка данных:
Детекция через Isolation Forest + замена на скользящую медиану (_handle_outliers).
Анализ распределения остатков (_analyze_residuals).

### Визуализация:
Комплексные графики (тренд, спектр, ACF/PACF, скользящие статистики) для визуальной оценки структуры ряда и отчета

## Класс TimeSeriesClass

Инкапсулирует логику прогнозирования с поддержкой нескольких моделей.

### Модель (STL + ARIMA):
Декомпозиция на тренд, сезонность и остатки (hybrid_stl_arima).
Прогноз тренда и остатков через AutoARIMA + повторение сезонного паттерна.
Эффективна при отсутствии дрифта тренда на горизонте 7 дней.

### SARIMAX:
Параметры (p, d, q) выбираются на основе ACF/PACF из отчета (train_sarimax).
Помогает с учетом экзогенных переменных(праздники, цены).
Ограничение: Требует ручной настройки сезонных параметров.
Благодаря данным полученным после анализа дает качество лучше, чем с автоподбором у autoARIMA

### AutoARIMA:
Автоматический подбор параметров с проверкой сезонности (auto_arima_forecast).
Единственоое на длинных горизонтах может сходиться к среднему. Как и многие модели из семейства ARMA, поэтому самые простые реализации не использовала, а использовала либо настройку вручную либо дополняла компонентами, которые не давали сойтись прогнозу к среднему, а автоариму взяла чтобы посмотреть насколько хорошо параметры подбираются автоматически


## Адаптация под особенности ряда
Обработка выбросов: Изоляция аномалий + сглаживание через rolling median.
Динамический выбор модели: На основе отчетов о стационарности и сезонности.

В зависимости от горизонта тоже подойдут разные модели:
Для 7 дней: STL + ARIMA (хорошо ловит сезонность).
Для 30+ дней: SARIMAX с пересчетом параметров тренда.

### Используемые метрики:
MAE (Mean Absolute Error) - Средняя абсолютная ошибка:
    Показывает среднюю величину ошибки прогноза в абсолютных единицах измерения.
    Чем ближе к 0, тем лучше.

MAPE (Mean Absolute Percentage Error) - Средняя абсолютная процентная ошибка:
    Измеряет среднюю ошибку в процентах относительно фактических значений.
    Универсальная метрика для сравнения моделей на разных масштабах данных.

RMSE (Root Mean Square Error) - Корень из средней квадратичной ошибки:
    Учитывает большие ошибки сильнее, чем MAE. Полезен для выявления проблем с выбросами